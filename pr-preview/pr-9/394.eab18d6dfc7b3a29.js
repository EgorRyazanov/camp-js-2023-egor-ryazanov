"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[394],{2394:(tr,h,a)=>{a.r(h),a.d(h,{AuthModule:()=>W});var l=a(89),_=a(8256),L=a(7513),C=a(3058),I=a(7250),M=a(7455),s=a(2369),u=a(2074),g=a(1300),n=a(6652),m=a(4162),r=a(4355),q=a(7969),p=a(2460);const f=()=>{const t=(0,r.f3M)(p.K),o=(0,r.f3M)(m.F0);return t.isAuthorized$.pipe((0,q.U)(e=>!e||o.parseUrl("/")))};var d=a(7881),Z=a(4873),A=a(4121),x=a(4707),c=a(5329),T=a(2519),v=a(9603);function E(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&t&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Email","email")," "))}function U(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&t&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Email","required")," "))}function F(t,o){if(1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&t){const e=o.ngIf;r.xp6(1),r.hij(" ",e," ")}}function R(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&t&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Password","required")," "))}function y(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&t&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Password","minlength")," "))}function N(t,o){if(1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&t){const e=o.ngIf;r.xp6(1),r.hij(" ",e," ")}}function J(t,o){1&t&&(r.TgZ(0,"div",11),r._UZ(1,"camp-spinner"),r.qZA())}let j=(()=>{class t{constructor(){this.isLoading$=new A.X(!1),this.formBuilder=(0,r.f3M)(n.j3),this.userService=(0,r.f3M)(p.K),this.destroyRef=(0,r.f3M)(r.ktI),this.router=(0,r.f3M)(m.F0),this.loginForm=this.initLoginForm()}onSubmit(){this.loginForm.markAllAsTouched(),!this.loginForm.invalid&&(this.isLoading$.next(!0),this.userService.login(this.loginForm.getRawValue()).pipe((0,Z.o)(this.loginForm),(0,x.f)(this.isLoading$),(0,d.sL)(this.destroyRef)).subscribe(()=>{this.router.navigate(["/"])}))}hasRequiredError(e){return this.loginForm.controls[e].hasError("required")}get hasPasswordMinLengthError(){return this.loginForm.controls.password.hasError("minlength")}get isEmailValid(){return this.loginForm.controls.email.hasError("email")}getGeneralFieldErrors(e){return this.loginForm.controls[e].hasError("invalid")?this.loginForm.controls[e].getError("invalid"):null}initLoginForm(){return this.formBuilder.group({email:this.formBuilder.control("",[n.kI.required,n.kI.email]),password:this.formBuilder.control("",[n.kI.required,n.kI.minLength(c.l)])})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["camp-login"]],decls:26,vars:10,consts:[[1,"auth-container"],[1,"auth-title"],[1,"auth-form",3,"formGroup","ngSubmit"],["color","accent"],["formControlName","email","matInput",""],[4,"ngIf"],["type","password","formControlName","password","matInput",""],["type","submit","mat-raised-button","","color","primary",1,"auth-submit"],["routerLink","/auth/register",1,"auth-link"],["routerLink","/animes",1,"auth-link"],["class","auth-spinner",4,"ngIf"],[1,"auth-spinner"]],template:function(e,i){1&e&&(r.TgZ(0,"div",0)(1,"h1",1),r._uU(2,"Login"),r.qZA(),r.TgZ(3,"form",2),r.NdJ("ngSubmit",function(){return i.onSubmit()}),r.TgZ(4,"mat-form-field",3)(5,"mat-label",3),r._uU(6,"Email"),r.qZA(),r._UZ(7,"input",4),r.YNc(8,E,3,4,"mat-error",5),r.YNc(9,U,3,4,"mat-error",5),r.YNc(10,F,2,1,"mat-error",5),r.qZA(),r.TgZ(11,"mat-form-field",3)(12,"mat-label",3),r._uU(13,"Password"),r.qZA(),r._UZ(14,"input",6),r.YNc(15,R,3,4,"mat-error",5),r.YNc(16,y,3,4,"mat-error",5),r.YNc(17,N,2,1,"mat-error",5),r.qZA(),r.TgZ(18,"button",7),r._uU(19,"Login"),r.qZA()(),r.TgZ(20,"a",8),r._uU(21,"Do not have an account yet?"),r.qZA(),r.TgZ(22,"a",9),r._uU(23,"Go to main page"),r.qZA(),r.YNc(24,J,2,0,"div",10),r.ALo(25,"async"),r.qZA()),2&e&&(r.xp6(3),r.Q6J("formGroup",i.loginForm),r.xp6(5),r.Q6J("ngIf",i.isEmailValid),r.xp6(1),r.Q6J("ngIf",i.hasRequiredError("email")),r.xp6(1),r.Q6J("ngIf",i.getGeneralFieldErrors("email")),r.xp6(5),r.Q6J("ngIf",i.hasRequiredError("password")),r.xp6(1),r.Q6J("ngIf",i.hasPasswordMinLengthError),r.xp6(1),r.Q6J("ngIf",i.getGeneralFieldErrors("password")),r.xp6(7),r.Q6J("ngIf",r.lcZ(25,8,i.isLoading$)))},dependencies:[n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,m.rH,l.O5,T.O,s.KE,s.hX,s.TO,u.Nt,g.lW,l.Ov,v.X],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;height:100vh;flex-direction:column;justify-content:center;align-items:center}.auth-form[_ngcontent-%COMP%]{width:450px;display:flex;flex-direction:column}.auth-title[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin-bottom:var(--space-lg)}.auth-spinner[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:var(--background-alternative-primary-color)}.auth-submit[_ngcontent-%COMP%]{margin-bottom:var(--space-sm)}.auth-link[_ngcontent-%COMP%]{text-decoration:none;color:var(--primary-contrast-color)}"],changeDetection:0}),t})();var P=a(2560);function w(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&t&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Email","required")," "))}function Q(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&t&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Email","email")," "))}function Y(t,o){if(1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&t){const e=o.ngIf;r.xp6(1),r.hij(" ",e," ")}}function b(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&t&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"First name","required")," "))}function O(t,o){if(1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&t){const e=o.ngIf;r.xp6(1),r.hij(" ",e," ")}}function S(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&t&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Last name","required")," "))}function B(t,o){if(1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&t){const e=o.ngIf;r.xp6(1),r.hij(" ",e," ")}}function G(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&t&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Password","minlength")," "))}function k(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&t&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Password","required")," "))}function X(t,o){if(1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&t){const e=o.ngIf;r.xp6(1),r.hij(" ",e," ")}}function $(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&t&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Repeated password","minlength")," "))}function z(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&t&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Repeated password","required")," "))}function V(t,o){1&t&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&t&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Passwords","matchError")," "))}function K(t,o){1&t&&(r.TgZ(0,"div",14),r._UZ(1,"camp-spinner"),r.qZA())}const D=[{path:"login",component:j,canActivate:[f]},{path:"register",component:(()=>{class t{constructor(){this.isLoading$=new A.X(!1),this.formBuilder=(0,r.f3M)(n.j3),this.userService=(0,r.f3M)(p.K),this.destroyRef=(0,r.f3M)(r.ktI),this.router=(0,r.f3M)(m.F0),this.registrationForm=this.initRegisterForm()}onSubmit(){this.registrationForm.markAllAsTouched(),!this.registrationForm.invalid&&(this.isLoading$.next(!0),this.userService.register(this.registrationForm.getRawValue()).pipe((0,Z.o)(this.registrationForm),(0,x.f)(this.isLoading$),(0,d.sL)(this.destroyRef)).subscribe(()=>{this.router.navigate(["/"])}))}hasRequiredError(e){return this.registrationForm.controls[e].hasError("required")}hasMinLengthError(e){return this.registrationForm.controls[e].hasError("minlength")}get isEmailValid(){return this.registrationForm.controls.email.hasError("email")}get hasPasswordMatch(){return this.registrationForm.controls.repeatPassword.hasError("matchError")}getGeneralFieldErrors(e){return this.registrationForm.controls[e].hasError("invalid")?this.registrationForm.controls[e].getError("invalid"):null}initRegisterForm(){return this.formBuilder.group({email:this.formBuilder.control("",[n.kI.required,n.kI.email]),firstName:this.formBuilder.control("",[n.kI.required]),lastName:this.formBuilder.control("",[n.kI.required]),password:this.formBuilder.control("",[n.kI.required,n.kI.minLength(c.l)]),repeatPassword:this.formBuilder.control("",[n.kI.required,n.kI.minLength(c.l),P.m.matchControl("password")])})}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Xpm({type:t,selectors:[["camp-login"]],decls:45,vars:17,consts:[[1,"auth-container"],[1,"auth-title"],[1,"auth-form",3,"formGroup","ngSubmit"],["color","accent"],["formControlName","email","matInput",""],[4,"ngIf"],["formControlName","firstName","matInput",""],["formControlName","lastName","matInput",""],["type","password","formControlName","password","matInput",""],["type","password","formControlName","repeatPassword","matInput",""],["type","submit","mat-raised-button","","color","primary",1,"auth-submit"],["routerLink","/auth/login","href","",1,"auth-link"],["routerLink","/animes",1,"auth-link"],["class","auth-spinner",4,"ngIf"],[1,"auth-spinner"]],template:function(e,i){1&e&&(r.TgZ(0,"div",0)(1,"h1",1),r._uU(2,"Register"),r.qZA(),r.TgZ(3,"form",2),r.NdJ("ngSubmit",function(){return i.onSubmit()}),r.TgZ(4,"mat-form-field",3)(5,"mat-label",3),r._uU(6,"Email"),r.qZA(),r._UZ(7,"input",4),r.YNc(8,w,3,4,"mat-error",5),r.YNc(9,Q,3,4,"mat-error",5),r.YNc(10,Y,2,1,"mat-error",5),r.qZA(),r.TgZ(11,"mat-form-field",3)(12,"mat-label",3),r._uU(13,"First name"),r.qZA(),r._UZ(14,"input",6),r.YNc(15,b,3,4,"mat-error",5),r.YNc(16,O,2,1,"mat-error",5),r.qZA(),r.TgZ(17,"mat-form-field",3)(18,"mat-label",3),r._uU(19,"Last name"),r.qZA(),r._UZ(20,"input",7),r.YNc(21,S,3,4,"mat-error",5),r.YNc(22,B,2,1,"mat-error",5),r.qZA(),r.TgZ(23,"mat-form-field",3)(24,"mat-label",3),r._uU(25,"Password"),r.qZA(),r._UZ(26,"input",8),r.YNc(27,G,3,4,"mat-error",5),r.YNc(28,k,3,4,"mat-error",5),r.YNc(29,X,2,1,"mat-error",5),r.qZA(),r.TgZ(30,"mat-form-field",3)(31,"mat-label",3),r._uU(32,"Repeat password"),r.qZA(),r._UZ(33,"input",9),r.YNc(34,$,3,4,"mat-error",5),r.YNc(35,z,3,4,"mat-error",5),r.YNc(36,V,3,4,"mat-error",5),r.qZA(),r.TgZ(37,"button",10),r._uU(38,"Register"),r.qZA()(),r.TgZ(39,"a",11),r._uU(40,"Already have an account?"),r.qZA(),r.TgZ(41,"a",12),r._uU(42,"Go to main page"),r.qZA(),r.YNc(43,K,2,0,"div",13),r.ALo(44,"async"),r.qZA()),2&e&&(r.xp6(3),r.Q6J("formGroup",i.registrationForm),r.xp6(5),r.Q6J("ngIf",i.hasRequiredError("email")),r.xp6(1),r.Q6J("ngIf",i.isEmailValid),r.xp6(1),r.Q6J("ngIf",i.getGeneralFieldErrors("email")),r.xp6(5),r.Q6J("ngIf",i.hasRequiredError("firstName")),r.xp6(1),r.Q6J("ngIf",i.getGeneralFieldErrors("firstName")),r.xp6(5),r.Q6J("ngIf",i.hasRequiredError("lastName")),r.xp6(1),r.Q6J("ngIf",i.getGeneralFieldErrors("lastName")),r.xp6(5),r.Q6J("ngIf",i.hasMinLengthError("password")),r.xp6(1),r.Q6J("ngIf",i.hasRequiredError("password")),r.xp6(1),r.Q6J("ngIf",i.getGeneralFieldErrors("password")),r.xp6(5),r.Q6J("ngIf",i.hasMinLengthError("repeatPassword")),r.xp6(1),r.Q6J("ngIf",i.hasRequiredError("repeatPassword")),r.xp6(1),r.Q6J("ngIf",i.hasPasswordMatch),r.xp6(7),r.Q6J("ngIf",r.lcZ(44,15,i.isLoading$)))},dependencies:[n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,m.rH,l.O5,T.O,s.KE,s.hX,s.TO,u.Nt,g.lW,l.Ov,v.X],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;height:100vh;flex-direction:column;justify-content:center;align-items:center}.auth-form[_ngcontent-%COMP%]{width:450px;display:flex;flex-direction:column}.auth-title[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin-bottom:var(--space-lg)}.auth-spinner[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:var(--background-alternative-primary-color)}.auth-submit[_ngcontent-%COMP%]{margin-bottom:var(--space-sm)}.auth-link[_ngcontent-%COMP%]{text-decoration:none;color:var(--primary-contrast-color)}"],changeDetection:0}),t})(),canActivate:[f]}];let H=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[m.Bz.forChild(D),m.Bz]}),t})(),W=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.oAB({type:t}),t.\u0275inj=r.cJS({imports:[n.UX,l.ez,_.m,L.p0,C.Cq,I.JX,M.TU,s.lN,u.c,g.ot,H]}),t})()}}]);