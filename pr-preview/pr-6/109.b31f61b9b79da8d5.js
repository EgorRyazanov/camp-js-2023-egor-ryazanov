"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[109],{7109:(cr,T,a)=>{a.r(T),a.d(T,{AuthModule:()=>lr});var g=a(89),M=a(2355),N=a(7513),y=a(3058),q=a(7250),U=a(7455),m=a(2369),p=a(2074),f=a(1300),i=a(6652),l=a(6789),r=a(4355),R=a(7969),d=a(8987);const A=()=>{const o=(0,r.f3M)(d.K),e=(0,r.f3M)(l.F0);return o.isAuthorized$.pipe((0,R.U)(t=>!t||e.parseUrl("/auth/login")))};var c,o,x=a(7881);(o=c||(c={})).MIN_LENGHT=8,o.matchControl=function e(n){return s=>s.parent?.get(n)?.value!==s.value?{matchError:!0}:null},o.convertTypeToMessage=function t(n,s){return{required:`${s??"Field"} is required`,email:"Email is incorrect",minlength:`${s} should contain minimum ${o.MIN_LENGHT} symbols`,matchError:`${s} do not match`}[n]};var h=a(447),Z=a(3568),_=a(3787);function F(o){return e=>e.pipe((0,Z.K)(t=>(t instanceof h.k&&function J(o,e){Object.keys(o.controls).forEach(n=>{const s=e[n],v=o.controls[n];s&&v&&v.setErrors({invalid:s})})}(o,t.validationData),(0,_._)(()=>t))))}var u=a(4121),E=a(9676),C=a(5490),I=a(2519);let L=(()=>{class o{transform(t,n){return c.convertTypeToMessage(n,t)}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275pipe=r.Yjl({name:"errorMessage",type:o,pure:!0}),o})();function j(o,e){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const t=e.ngIf;r.xp6(1),r.hij(" ",t," ")}}function P(o,e){if(1&o&&(r.TgZ(0,"div",12),r.YNc(1,j,2,1,"mat-error",6),r.ALo(2,"async"),r.qZA()),2&o){const t=r.oxw();r.xp6(1),r.Q6J("ngIf",r.lcZ(2,1,t.commonErrors$))}}function w(o,e){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Email","required")," "))}function O(o,e){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Email","email")," "))}function Y(o,e){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const t=e.$implicit;r.xp6(1),r.hij(" ",t," ")}}function Q(o,e){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Password","required")," "))}function $(o,e){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Password","minlength")," "))}function b(o,e){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const t=e.$implicit;r.xp6(1),r.hij(" ",t," ")}}function S(o,e){1&o&&(r.TgZ(0,"div",13),r._UZ(1,"camp-spinner"),r.qZA())}let B=(()=>{class o{constructor(){this.isLoading$=new u.X(!1),this.commonErrors$=new u.X(""),this.formBuilder=(0,r.f3M)(i.j3),this.userService=(0,r.f3M)(d.K),this.destroyRef=(0,r.f3M)(r.ktI),this.router=(0,r.f3M)(l.F0),this.loginForm=this.initLoginForm()}login(){this.loginForm.markAllAsTouched(),!0!==this.loginForm.invalid&&(this.isLoading$.next(!0),this.userService.login(this.loginForm.value).pipe((0,E.P)(),F(this.loginForm),(0,Z.K)(t=>(t instanceof h.k&&null!=t.validationData.nonFieldErrors&&this.commonErrors$.next(t.validationData.nonFieldErrors),(0,_._)(()=>t))),(0,C.x)(()=>{this.isLoading$.next(!1)}),(0,x.sL)(this.destroyRef)).subscribe(()=>{this.router.navigate(["/"])}))}initLoginForm(){return this.formBuilder.group({email:this.formBuilder.control("",[i.kI.required,i.kI.email]),password:this.formBuilder.control("",[i.kI.required,i.kI.minLength(c.MIN_LENGHT)])})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=r.Xpm({type:o,selectors:[["camp-login"]],decls:26,vars:13,consts:[[1,"auth-container"],[1,"auth-title"],["class","auth-common-errors-container",4,"ngIf"],[1,"auth-form",3,"formGroup","ngSubmit"],["color","accent"],["formControlName","email","matInput",""],[4,"ngIf"],[4,"ngFor","ngForOf"],["type","password","formControlName","password","matInput",""],["type","submit","mat-raised-button","","color","primary",1,"auth-submit"],["routerLink","/auth/register","href","",1,"auth-link"],["class","auth-spinner",4,"ngIf"],[1,"auth-common-errors-container"],[1,"auth-spinner"]],template:function(t,n){1&t&&(r.TgZ(0,"div",0)(1,"h1",1),r._uU(2,"Login"),r.qZA(),r.YNc(3,P,3,3,"div",2),r.ALo(4,"async"),r.TgZ(5,"form",3),r.NdJ("ngSubmit",function(){return n.login()}),r.TgZ(6,"mat-form-field",4)(7,"mat-label",4),r._uU(8,"Email"),r.qZA(),r._UZ(9,"input",5),r.YNc(10,w,3,4,"mat-error",6),r.YNc(11,O,3,4,"mat-error",6),r.YNc(12,Y,2,1,"mat-error",7),r.qZA(),r.TgZ(13,"mat-form-field",4)(14,"mat-label",4),r._uU(15,"Password"),r.qZA(),r._UZ(16,"input",8),r.YNc(17,Q,3,4,"mat-error",6),r.YNc(18,$,3,4,"mat-error",6),r.YNc(19,b,2,1,"mat-error",7),r.qZA(),r.TgZ(20,"button",9),r._uU(21,"Login"),r.qZA()(),r.TgZ(22,"a",10),r._uU(23,"Do not have an account yet?"),r.qZA(),r.YNc(24,S,2,0,"div",11),r.ALo(25,"async"),r.qZA()),2&t&&(r.xp6(3),r.Q6J("ngIf",r.lcZ(4,9,n.commonErrors$)),r.xp6(2),r.Q6J("formGroup",n.loginForm),r.xp6(5),r.Q6J("ngIf",n.loginForm.controls.email.hasError("required")&&n.loginForm.controls.email.touched),r.xp6(1),r.Q6J("ngIf",n.loginForm.controls.email.hasError("email")&&n.loginForm.controls.email.touched),r.xp6(1),r.Q6J("ngForOf",n.loginForm.controls.email.getError("invalid")),r.xp6(5),r.Q6J("ngIf",n.loginForm.controls.password.hasError("required")&&n.loginForm.controls.password.touched),r.xp6(1),r.Q6J("ngIf",n.loginForm.controls.password.hasError("minlength")&&n.loginForm.controls.password.touched),r.xp6(1),r.Q6J("ngForOf",n.loginForm.controls.password.getError("invalid")),r.xp6(5),r.Q6J("ngIf",r.lcZ(25,11,n.isLoading$)))},dependencies:[i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,l.rH,g.sg,g.O5,I.O,m.KE,m.hX,m.TO,p.Nt,f.lW,g.Ov,L],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;height:100vh;flex-direction:column;justify-content:center;align-items:center}.auth-form[_ngcontent-%COMP%]{width:450px;display:flex;flex-direction:column}.auth-title[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin-bottom:var(--space-lg)}.auth-spinner[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;z-index:100;background-color:var(--spinner-background-color)}.auth-submit[_ngcontent-%COMP%]{margin-bottom:var(--space-sm)}.auth-link[_ngcontent-%COMP%]{text-decoration:none;color:var(--primary-contrast-color)}.auth-common-errors-container[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}"]}),o})();function G(o,e){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const t=e.ngIf;r.xp6(1),r.hij(" ",t," ")}}function k(o,e){if(1&o&&(r.TgZ(0,"div",14),r.YNc(1,G,2,1,"mat-error",6),r.ALo(2,"async"),r.qZA()),2&o){const t=r.oxw();r.xp6(1),r.Q6J("ngIf",r.lcZ(2,1,t.commonErrors$))}}function z(o,e){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Email","required")," "))}function K(o,e){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Email","email")," "))}function X(o,e){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const t=e.ngIf;r.xp6(1),r.hij(" ",t," ")}}function H(o,e){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"First name","required")," "))}function D(o,e){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const t=e.ngIf;r.xp6(1),r.hij(" ",t," ")}}function W(o,e){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Last name","required")," "))}function V(o,e){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const t=e.ngIf;r.xp6(1),r.hij(" ",t," ")}}function rr(o,e){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Password","minlength")," "))}function or(o,e){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Password","required")," "))}function tr(o,e){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const t=e.ngIf;r.xp6(1),r.hij(" ",t," ")}}function er(o,e){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Repeated password","minlength")," "))}function nr(o,e){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Repeated password","required")," "))}function ir(o,e){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Passwords","matchError")," "))}function ar(o,e){1&o&&(r.TgZ(0,"div",15),r._UZ(1,"camp-spinner"),r.qZA())}const sr=[{path:"login",component:B,canActivate:[A]},{path:"register",component:(()=>{class o{constructor(){this.isLoading$=new u.X(!1),this.commonErrors$=new u.X(""),this.formBuilder=(0,r.f3M)(i.j3),this.userService=(0,r.f3M)(d.K),this.destroyRef=(0,r.f3M)(r.ktI),this.router=(0,r.f3M)(l.F0),this.registerForm=this.initRegisterForm()}register(){this.registerForm.markAllAsTouched(),!0!==this.registerForm.invalid&&(this.isLoading$.next(!0),this.userService.register(this.registerForm.value).pipe((0,E.P)(),F(this.registerForm),(0,C.x)(()=>{this.isLoading$.next(!1)}),(0,Z.K)(t=>(t instanceof h.k&&null!=t.validationData.nonFieldErrors&&this.commonErrors$.next(t.validationData.nonFieldErrors),(0,_._)(()=>t))),(0,x.sL)(this.destroyRef)).subscribe(()=>{this.router.navigate(["/"])}))}initRegisterForm(){return this.formBuilder.group({email:this.formBuilder.control("",[i.kI.required,i.kI.email]),firstName:this.formBuilder.control("",[i.kI.required]),lastName:this.formBuilder.control("",[i.kI.required]),password:this.formBuilder.control("",[i.kI.required,i.kI.minLength(c.MIN_LENGHT)]),repeatPassword:this.formBuilder.control("",[i.kI.required,i.kI.minLength(c.MIN_LENGHT),c.matchControl("password")])})}}return o.\u0275fac=function(t){return new(t||o)},o.\u0275cmp=r.Xpm({type:o,selectors:[["camp-login"]],decls:45,vars:20,consts:[[1,"auth-container"],[1,"auth-title"],["class","auth-common-errors-container",4,"ngIf"],[1,"auth-form",3,"formGroup","ngSubmit"],["color","accent"],["formControlName","email","matInput",""],[4,"ngIf"],["formControlName","firstName","matInput",""],["formControlName","lastName","matInput",""],["type","password","formControlName","password","matInput",""],["type","password","formControlName","repeatPassword","matInput",""],["type","submit","mat-raised-button","","color","primary",1,"auth-submit"],["routerLink","/auth/login","href","",1,"auth-link"],["class","auth-spinner",4,"ngIf"],[1,"auth-common-errors-container"],[1,"auth-spinner"]],template:function(t,n){1&t&&(r.TgZ(0,"div",0)(1,"h1",1),r._uU(2,"Register"),r.qZA(),r.YNc(3,k,3,3,"div",2),r.ALo(4,"async"),r.TgZ(5,"form",3),r.NdJ("ngSubmit",function(){return n.register()}),r.TgZ(6,"mat-form-field",4)(7,"mat-label",4),r._uU(8,"Email"),r.qZA(),r._UZ(9,"input",5),r.YNc(10,z,3,4,"mat-error",6),r.YNc(11,K,3,4,"mat-error",6),r.YNc(12,X,2,1,"mat-error",6),r.qZA(),r.TgZ(13,"mat-form-field",4)(14,"mat-label",4),r._uU(15,"First name"),r.qZA(),r._UZ(16,"input",7),r.YNc(17,H,3,4,"mat-error",6),r.YNc(18,D,2,1,"mat-error",6),r.qZA(),r.TgZ(19,"mat-form-field",4)(20,"mat-label",4),r._uU(21,"Last name"),r.qZA(),r._UZ(22,"input",8),r.YNc(23,W,3,4,"mat-error",6),r.YNc(24,V,2,1,"mat-error",6),r.qZA(),r.TgZ(25,"mat-form-field",4)(26,"mat-label",4),r._uU(27,"Password"),r.qZA(),r._UZ(28,"input",9),r.YNc(29,rr,3,4,"mat-error",6),r.YNc(30,or,3,4,"mat-error",6),r.YNc(31,tr,2,1,"mat-error",6),r.qZA(),r.TgZ(32,"mat-form-field",4)(33,"mat-label",4),r._uU(34,"Repeat password"),r.qZA(),r._UZ(35,"input",10),r.YNc(36,er,3,4,"mat-error",6),r.YNc(37,nr,3,4,"mat-error",6),r.YNc(38,ir,3,4,"mat-error",6),r.qZA(),r.TgZ(39,"button",11),r._uU(40,"Register"),r.qZA()(),r.TgZ(41,"a",12),r._uU(42,"Already have an account?"),r.qZA(),r.YNc(43,ar,2,0,"div",13),r.ALo(44,"async"),r.qZA()),2&t&&(r.xp6(3),r.Q6J("ngIf",r.lcZ(4,16,n.commonErrors$)),r.xp6(2),r.Q6J("formGroup",n.registerForm),r.xp6(5),r.Q6J("ngIf",n.registerForm.controls.email.hasError("required")&&n.registerForm.controls.email.touched),r.xp6(1),r.Q6J("ngIf",n.registerForm.controls.email.hasError("email")&&n.registerForm.controls.email.touched),r.xp6(1),r.Q6J("ngIf",n.registerForm.controls.email.getError("invalid")),r.xp6(5),r.Q6J("ngIf",n.registerForm.controls.firstName.hasError("required")&&n.registerForm.controls.firstName.touched),r.xp6(1),r.Q6J("ngIf",n.registerForm.controls.firstName.getError("invalid")),r.xp6(5),r.Q6J("ngIf",n.registerForm.controls.lastName.hasError("required")&&n.registerForm.controls.lastName.touched),r.xp6(1),r.Q6J("ngIf",n.registerForm.controls.lastName.getError("invalid")),r.xp6(5),r.Q6J("ngIf",n.registerForm.controls.password.hasError("minlength")&&n.registerForm.controls.password.touched),r.xp6(1),r.Q6J("ngIf",n.registerForm.controls.password.hasError("required")&&n.registerForm.controls.password.touched),r.xp6(1),r.Q6J("ngIf",n.registerForm.controls.password.getError("invalid")),r.xp6(5),r.Q6J("ngIf",n.registerForm.controls.repeatPassword.hasError("minlength")&&n.registerForm.controls.repeatPassword.touched),r.xp6(1),r.Q6J("ngIf",n.registerForm.controls.repeatPassword.hasError("required")&&n.registerForm.controls.repeatPassword.touched),r.xp6(1),r.Q6J("ngIf",n.registerForm.controls.repeatPassword.hasError("matchError")&&n.registerForm.controls.repeatPassword.touched),r.xp6(5),r.Q6J("ngIf",r.lcZ(44,18,n.isLoading$)))},dependencies:[i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,l.rH,g.O5,I.O,m.KE,m.hX,m.TO,p.Nt,f.lW,g.Ov,L],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;height:100vh;flex-direction:column;justify-content:center;align-items:center}.auth-form[_ngcontent-%COMP%]{width:450px;display:flex;flex-direction:column}.auth-title[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin-bottom:var(--space-lg)}.auth-spinner[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;z-index:100;background-color:var(--spinner-background-color)}.auth-submit[_ngcontent-%COMP%]{margin-bottom:var(--space-sm)}.auth-link[_ngcontent-%COMP%]{text-decoration:none;color:var(--primary-contrast-color)}.auth-common-errors-container[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}"]}),o})(),canActivate:[A]}];let mr=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[l.Bz.forChild(sr),l.Bz]}),o})(),lr=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[i.UX,g.ez,M.m,N.p0,y.Cq,q.JX,U.TU,m.lN,p.c,f.ot,mr]}),o})()}}]);