"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[335],{2335:(Qe,R,c)=>{c.r(R),c.d(R,{AnimeModule:()=>ze});var Z,P=c(89),z=c(2355),A=c(7513),W=c(3058),M=c(7250),Y=c(7455),v=c(6652),Q=c(8090),F=c(2074),U=c(2369),q=c(2151),V=c(1300),D=c(6789),e=c(4355),ee=c(4121),te=c(2147),w=c(7969),L=c(8168),ne=c(3151),ie=c(1528),ae=c(3568),re=c(3787),r=(()=>((r=r||{}).Tv="TV",r.Ova="OVA",r.Movie="MOVIE",r.Special="SPECIAL",r.Ona="ONA",r.Music="MUSIC",r.Unknown="UNKNOWN",r))();!function(t){const i={[r.Movie]:"Movie",[r.Music]:"Music",[r.Ona]:"Ona",[r.Ova]:"Ova",[r.Special]:"Special",[r.Tv]:"Tv",[r.Unknown]:"Unknown"};t.toReadable=function n(a){return i[a]}}(Z||(Z={}));var S,f=(()=>((f=f||{}).TitleEnghlish="titleEnglish",f.Status="status",f.AiredStart="aired.start",f.None="",f))(),h=(()=>((h=h||{}).Ascending="asc",h.Descending="desc",h.None="",h))();!function(t){function i(o,p){return Object.values(p).includes(o)}function n(o){return i(o,r)}function y(o){const p=Number(o);return Number.isNaN(p)?{pageNumber:t.defaultQueryParams.pageNumber,isValid:!1}:{pageNumber:p,isValid:!0}}function m(o){const p=Number(o);return Number.isNaN(p)||!t.pageSizes.includes(p)?{pageSize:t.defaultQueryParams.pageSize,isValid:!1}:{pageSize:p,isValid:!0}}function J(o){return o instanceof Array?{search:t.defaultQueryParams.search,isValid:!1}:{search:o,isValid:!0}}function B(o){if(o instanceof Array){const p=o.filter(O=>"string"==typeof O&&n(O));return{isValid:p.length===o.length,type:p}}return n(o)?{type:[o],isValid:!0}:{type:t.defaultQueryParams.type,isValid:!1}}function j(o){return o instanceof Array||!function s(o){return i(o,f)}(o)?{field:f.None,isValid:!1}:{field:o,isValid:!0}}function $(o){return o instanceof Array||!function a(o){return i(o,h)}(o)?{direction:h.None,isValid:!1}:{direction:o,isValid:!0}}t.defaultQueryParams={pageSize:5,pageNumber:0,type:[],field:f.None,direction:h.None,search:""},t.pageSizes=[5,10,25],t.pageToModel=y,t.sizeToModel=m,t.searchToModel=J,t.typeToModel=B,t.fieldToModel=j,t.directionToModel=$,t.toModel=function Ye(o){const p=y(o.pageNumber),O=m(o.pageSize),k=j(o.field),H=B(o.type),X=J(o.search),K=$(o.direction);return{isValid:p.isValid&&O.isValid&&k.isValid&&H.isValid&&X.isValid&&K.isValid,pageNumber:p.pageNumber,pageSize:O.pageSize,field:k.field,type:H.type,search:X.search,direction:K.direction}}}(S||(S={}));var G=c(6738),l=(()=>((l=l||{}).Tv="TV",l.Ova="OVA",l.Movie="MOVIE",l.Special="SPECIAL",l.Ona="ONA",l.Music="MUSIC",l.Unknown="UNKNOWN",l))(),_=(()=>((_=_||{}).Finished="FINISHED",_.Airing="AIRING",_.NotYetAired="NOT_YET_AIRED",_))(),u=(()=>((u=u||{}).G="G",u.PG="PG",u.PG_13="PG_13",u.R_17="R_17",u.R_PLUS="R_PLUS",u.R_X="R_X",u.Unknown="UNKNOWN",u))();class se{constructor(i){this.id=i.id,this.created=i.created,this.modified=i.modified,this.titleEnglish=i.titleEnglish,this.titleJapanese=i.titleJapanese,this.image=i.image,this.aired=i.aired,this.type=i.type,this.status=i.status,this.score=i.score,this.userScore=i.userScore}}var E,d=(()=>((d=d||{}).G="G",d.PG="PG",d.PG_13="PG_13",d.R_17="R_17",d.R_PLUS="R_PLUS",d.R_X="R_X",d.Unknown="UNKNOWN",d))(),g=(()=>((g=g||{}).Finished="FINISHED",g.Airing="AIRING",g.NotYetAired="NOT_YET_AIRED",g))();!function(t){const i={[t.Finished]:"Finished",[t.Airing]:"Airing",[t.NotYetAired]:"Not yet aired"};t.toReadable=function n(a){return i[a]}}(g||(g={})),function(t){const i={[l.Music]:r.Music,[l.Ova]:r.Ova,[l.Ona]:r.Ona,[l.Special]:r.Special,[l.Tv]:r.Tv,[l.Unknown]:r.Unknown,[l.Movie]:r.Movie},n={[_.Finished]:g.Finished,[_.NotYetAired]:g.NotYetAired,[_.Airing]:g.Airing};t.fromDto=function a(s){return new se({id:s.id,created:new Date(s.created),modified:new Date(s.modified),titleEnglish:s.title_eng,titleJapanese:s.title_jpn,image:s.image,aired:s.aired,type:i[s.type],status:n[s.status],score:s.score,userScore:s.user_score})}}(E||(E={}));var x,C,t,b,I,T=(()=>((T=T||{}).TitleEnghlish="title_eng",T.Status="status",T.AiredStart="aired__startswith",T.None="",T))(),N=(()=>((N=N||{}).Ascending="-",N.Descending="",N.None="",N))();!function(t){const i={[h.Ascending]:N.Ascending,[h.Descending]:N.Descending,[h.None]:N.None};t.toDto=function n(a,s){if(null!=a&&a?.field in s)return`${i[a.direction]}${s[a.field]}`}}(x||(x={})),(t=C||(C={})).ANIME_TYPE_TO_DTO={[r.Music]:l.Music,[r.Ova]:l.Ova,[r.Ona]:l.Ona,[r.Special]:l.Special,[r.Tv]:l.Tv,[r.Unknown]:l.Unknown,[r.Movie]:l.Movie},t.toDto=function i(n){return n.map(a=>t.ANIME_TYPE_TO_DTO[a]).join(", ")},function(t){const n={[f.TitleEnghlish]:T.TitleEnghlish,[f.Status]:T.Status,[f.AiredStart]:T.AiredStart},a={[g.Finished]:_.Finished,[g.NotYetAired]:_.NotYetAired,[g.Airing]:_.Airing},s={[d.G]:u.G,[d.PG]:u.PG,[d.PG_13]:u.PG_13,[d.R_17]:u.R_17,[d.R_PLUS]:u.R_PLUS,[d.R_X]:u.R_X,[d.Unknown]:u.Unknown};t.toDto=function y(m){return function ce(t){const i={...t};for(const n in i)void 0===i[n]&&delete i[n];return i}({limit:m?.pageSize??25,offset:m?.pageNumber?m.pageNumber*(m?.pageSize??25):void 0,ordering:x.toDto(m?.ordering,n),rating:m?.rating?s[m.rating]:void 0,search:m?.search,source:m?.source,status:m?.status?a[m.status]:void 0,title_eng:m?.titleEnglish,title_jpn:m?.titleJapanese,type:m?.type?C.ANIME_TYPE_TO_DTO[m.type]:void 0,type__in:m?.typeIn?C.toDto(m.typeIn):void 0})}}(b||(b={})),function(t){t.fromDto=function i(n,a){return{count:n.count,next:n.next,previous:n.previous,items:n.results.map(s=>a(s))}}}(I||(I={}));var le=c(5134);let me=(()=>{class t{constructor(){this.http=(0,e.f3M)(G.eN),this.urlService=(0,e.f3M)(le.i)}getAnimes(n){return this.http.get(this.urlService.animeUrls.animes,{params:new G.LE({fromObject:{...b.toDto(n)}})}).pipe((0,w.U)(a=>I.fromDto(a,E.fromDto)))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var ue=c(2519),de=c(9024);let ge=(()=>{class t{transform(n){return g.toReadable(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"readableAnimeStatus",type:t,pure:!0}),t})(),fe=(()=>{class t{transform(n){return Z.toReadable(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"readableAnimeType",type:t,pure:!0}),t})(),pe=(()=>{class t{transform(n){return""===n||null==n||n instanceof Array&&0===n.length?"Unknown":n}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"empty",type:t,pure:!0}),t})();function he(t,i){if(1&t&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&t){const n=i.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}function _e(t,i){1&t&&(e.TgZ(0,"th",26),e._uU(1,"Image"),e.qZA())}function Ae(t,i){if(1&t&&(e.TgZ(0,"td",27),e._UZ(1,"img",28),e.qZA()),2&t){const n=i.$implicit;e.xp6(1),e.Q6J("alt",n.titleEnglish)("src",n.image,e.LSH)}}function Te(t,i){1&t&&(e.TgZ(0,"th",26),e._uU(1,"Japanese Title"),e.qZA())}function ye(t,i){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"empty"),e.qZA()),2&t){const n=i.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,n.titleJapanese)," ")}}function Se(t,i){1&t&&(e.TgZ(0,"th",29),e._uU(1,"English Title"),e.qZA())}function Ne(t,i){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"empty"),e.qZA()),2&t){const n=i.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,n.titleEnglish)," ")}}function ve(t,i){1&t&&(e.TgZ(0,"th",30),e._uU(1,"Start"),e.qZA())}function Pe(t,i){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"empty"),e.ALo(3,"date"),e.qZA()),2&t){const n=i.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,n.aired.start))," ")}}function Oe(t,i){1&t&&(e.TgZ(0,"th",31),e._uU(1,"Status"),e.qZA())}function De(t,i){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"readableAnimeStatus"),e.qZA()),2&t){const n=i.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,n.status))}}function Ce(t,i){1&t&&(e.TgZ(0,"th",26),e._uU(1,"Type"),e.qZA())}function Me(t,i){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"readableAnimeType"),e.qZA()),2&t){const n=i.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,n.type))}}function Ue(t,i){1&t&&e._UZ(0,"tr",32)}function Ze(t,i){1&t&&e._UZ(0,"tr",33)}function Ee(t,i){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"table",11),e.NdJ("matSortChange",function(s){e.CHM(n);const y=e.oxw();return e.KtG(y.changeSortParameter(s))}),e.ynx(2,12),e.YNc(3,_e,2,0,"th",13),e.YNc(4,Ae,2,2,"td",14),e.BQk(),e.ynx(5,15),e.YNc(6,Te,2,0,"th",13),e.YNc(7,ye,3,3,"td",14),e.BQk(),e.ynx(8,16),e.YNc(9,Se,2,0,"th",17),e.YNc(10,Ne,3,3,"td",14),e.BQk(),e.ynx(11,18),e.YNc(12,ve,2,0,"th",19),e.YNc(13,Pe,4,5,"td",14),e.BQk(),e.ynx(14,20),e.YNc(15,Oe,2,0,"th",21),e.YNc(16,De,3,3,"td",14),e.BQk(),e.ynx(17,22),e.YNc(18,Ce,2,0,"th",13),e.YNc(19,Me,3,3,"td",14),e.BQk(),e.YNc(20,Ue,1,0,"tr",23),e.YNc(21,Ze,1,0,"tr",24),e.qZA(),e.TgZ(22,"mat-paginator",25),e.NdJ("page",function(s){e.CHM(n);const y=e.oxw();return e.KtG(y.setPageParameter(s))}),e.qZA(),e.BQk()}if(2&t){const n=i.ngIf,a=e.oxw();e.xp6(1),e.Q6J("trackBy",a.trackByAnime)("dataSource",n.items)("matSortActive",a.queryParams.field)("matSortDirection",a.queryParams.direction),e.xp6(19),e.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns),e.xp6(1),e.Q6J("length",n.count)("pageSize",a.queryParams.pageSize)("pageIndex",a.queryParams.pageNumber)("pageSizeOptions",a.pageSizes)}}function xe(t,i){1&t&&(e.TgZ(0,"div",34),e._UZ(1,"camp-spinner"),e.qZA())}function be(t,i){1&t&&(e.ynx(0),e._uU(1,"Unknown"),e.BQk())}const Ie=[{path:"",component:(()=>{class t{constructor(){this.router=(0,e.f3M)(D.F0),this.animeService=(0,e.f3M)(me),this.formBuilder=(0,e.f3M)(v.j3),this.activeRoute=(0,e.f3M)(D.gz),this.pageSizes=S.pageSizes,this.isLoading$=new ee.X(!1),this.form=this.formBuilder.group({search:[S.defaultQueryParams.search],filters:[S.defaultQueryParams.type]}),this.displayedColumns=["image","titleJapanese","titleEnglish","start aired","type","status"],this.filters=[r.Tv,r.Ova,r.Movie,r.Special,r.Ona,r.Music,r.Unknown],this.animePage$=this.createAnimesStream()}trackByAnime(n,a){return a.id}changeSortParameter(n){const a=S.fieldToModel(n.active),s=S.directionToModel(n.direction);this.setQueryParams({direction:s.direction,field:s.direction===h.None?f.None:a.field})}setPageParameter(n){const a=this.queryParams;this.setQueryParams({pageNumber:n.pageIndex??a.pageNumber,pageSize:n.pageSize??a.pageSize})}setPaginationParameters(){this.setQueryParams({search:this.form.value.search,type:this.form.value.filters,pageNumber:S.defaultQueryParams.pageNumber})}get queryParams(){const n=this.activeRoute.snapshot.queryParams;return{search:n.search,type:n.type,pageNumber:n.pageNumber,pageSize:n.pageSize,field:n.field,direction:n.direction}}setQueryParams(n){this.router.navigate(["/animes"],{queryParams:{...this.queryParams,...n}})}createAnimesStream(){return this.activeRoute.queryParams.pipe((0,te.x)(),(0,w.U)(n=>this.mapQueryParamsToModel(n)),(0,L.b)(({isValid:n,params:a})=>{n||this.setQueryParams(a),this.setFormValues(a),this.isLoading$.next(!0)}),(0,ne.b)(500),(0,ie.w)(({params:n})=>this.getAnimePage(n)),(0,L.b)(()=>{this.isLoading$.next(!1),window.scroll({top:0,behavior:"smooth"})}),(0,ae.K)(n=>(this.isLoading$.next(!1),(0,re._)(()=>n))))}mapQueryParamsToModel(n){const a=S.toModel({search:n.search,type:n.type,pageNumber:n.pageNumber,pageSize:n.pageSize,field:n.field,direction:n.direction}),{isValid:s,...y}=a;return{params:y,isValid:a.isValid}}getAnimePage(n){return this.animeService.getAnimes({pageSize:n.pageSize,pageNumber:n.pageNumber,ordering:{field:n.field,direction:n.direction},search:n.search,typeIn:n.type})}setFormValues(n){this.form.patchValue({search:n.search,filters:n.type})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["camp-anime-page"]],decls:19,vars:8,consts:[[1,"animes"],[1,"animes__form","form",3,"formGroup","ngSubmit"],["color","accent"],["formControlName","search","matInput",""],["formControlName","filters","multiple",""],[3,"value",4,"ngFor","ngForOf"],["type","submit","mat-button","","color","accent"],[4,"ngIf"],["class","animes__spinner",4,"ngIf"],["emptyCell",""],[3,"value"],["matSort","","mat-table","","aria-label","Table of animes",1,"animes__table","table",3,"trackBy","dataSource","matSortActive","matSortDirection","matSortChange"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","titleJapanese"],["matColumnDef","titleEnglish"],["mat-sort-header","titleEnglish","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","start aired"],["mat-sort-header","aired.start","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-sort-header","status","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","type"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of Anime search results",1,"animes__paginator",3,"length","pageSize","pageIndex","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],[1,"table__image",3,"alt","src"],["mat-sort-header","titleEnglish","mat-header-cell",""],["mat-sort-header","aired.start","mat-header-cell",""],["mat-sort-header","status","mat-header-cell",""],["mat-header-row",""],["mat-row",""],[1,"animes__spinner"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return a.setPaginationParameters()}),e.TgZ(2,"mat-form-field",2)(3,"mat-label",2),e._uU(4,"Search"),e.qZA(),e._UZ(5,"input",3),e.qZA(),e.TgZ(6,"mat-form-field",2)(7,"mat-label"),e._uU(8,"Filters"),e.qZA(),e.TgZ(9,"mat-select",4),e.YNc(10,he,2,2,"mat-option",5),e.qZA()(),e.TgZ(11,"button",6),e._uU(12,"Find"),e.qZA()(),e.YNc(13,Ee,23,11,"ng-container",7),e.ALo(14,"async"),e.YNc(15,xe,2,0,"div",8),e.ALo(16,"async"),e.qZA(),e.YNc(17,be,2,0,"ng-template",null,9,e.W1O)),2&n&&(e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(9),e.Q6J("ngForOf",a.filters),e.xp6(3),e.Q6J("ngIf",e.lcZ(14,4,a.animePage$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(16,6,a.isLoading$)))},dependencies:[P.sg,P.O5,ue.O,A.BZ,A.fO,A.as,A.w1,A.Dz,A.nj,A.ge,A.ev,A.XQ,A.Gk,M.YE,M.nU,Y.NW,v._Y,v.Fj,v.JJ,v.JL,v.sg,v.u,U.KE,U.hX,F.Nt,Q.gD,de.ey,V.lW,P.Ov,P.uU,ge,fe,pe],styles:[".table__image[_ngcontent-%COMP%]{margin:10px;width:150px;height:150px;object-fit:contain}.animes[_ngcontent-%COMP%]{background-color:var(--background-primary-color);height:100vh}.animes__form[_ngcontent-%COMP%]{padding:var(--space-md);margin:0 auto}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:50%}.animes__paginator[_ngcontent-%COMP%]{position:sticky;bottom:0}.animes__spinner[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;z-index:100;background-color:var(--spinner-background-color)}"]}),t})()}];let Re=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[D.Bz.forChild(Ie),D.Bz]}),t})(),ze=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[Re,P.ez,z.m,A.p0,W.Cq,M.JX,Y.TU,v.UX,U.lN,F.c,Q.LD,q.Ps,V.ot,z.m]}),t})()}}]);