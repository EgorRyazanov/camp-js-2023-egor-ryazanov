"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[109],{7109:(gr,v,a)=>{a.r(v),a.d(v,{AuthModule:()=>lr});var m=a(89),I=a(2355),R=a(7513),y=a(3058),O=a(7250),q=a(7455),l=a(2369),f=a(2074),d=a(1300),i=a(6652),g=a(6789),r=a(4355),U=a(8168),h=a(67);const F=()=>{const o=(0,r.f3M)(h.K),n=(0,r.f3M)(g.F0);return o.isAuthorized$.pipe((0,U.b)(e=>!e||n.parseUrl("/")))};var c,o,A=a(7881);(o=c||(c={})).MIN_LENGHT=8,o.matchControl=function n(t){return s=>s.parent?.get(t)?.value!==s.value?{matchError:!0}:null},o.convertTypeToMessage=function e(t,s){return{required:`${s??"Field"} is required`,email:"Email is incorrect",minlength:`${s} should contain minimum ${o.MIN_LENGHT} symbols`,matchError:`${s} do not match`}[t]};var _=a(447),Z=a(3568),T=a(3787);function E(o){return n=>n.pipe((0,Z.K)(e=>(e instanceof _.g&&Object.keys(o.controls).forEach(t=>{o.controls[t].updateValueAndValidity(),t in e.validationErrors&&o.controls[t].setErrors({invalid:e.validationErrors[t].map(N=>N.message)})}),(0,T._)(()=>e))))}var u=a(413),p=a(4121),x=a(9676),C=a(5490),M=a(2519);let L=(()=>{class o{transform(e,t){return c.convertTypeToMessage(t,e)}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275pipe=r.Yjl({name:"errorMessage",type:o,pure:!0}),o})();function J(o,n){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const e=n.$implicit;r.xp6(1),r.hij(" ",e.message," ")}}function j(o,n){if(1&o&&(r.TgZ(0,"div",12),r.YNc(1,J,2,1,"mat-error",13),r.qZA()),2&o){const e=n.ngIf,t=r.oxw();r.xp6(1),r.Q6J("ngForOf",e)("ngForTrackBy",t.trackByErrors)}}function P(o,n){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Email","required")," "))}function w(o,n){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Email","email")," "))}function Y(o,n){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const e=n.$implicit;r.xp6(1),r.hij(" ",e," ")}}function Q(o,n){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Password","required")," "))}function $(o,n){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Password","minlength")," "))}function B(o,n){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const e=n.$implicit;r.xp6(1),r.hij(" ",e," ")}}function b(o,n){1&o&&(r.TgZ(0,"div",14),r._UZ(1,"camp-spinner"),r.qZA())}let S=(()=>{class o{constructor(){this.isLoading$=new p.X(!1),this.commonErrors$=new p.X([]),this.formBuilder=(0,r.f3M)(i.j3),this.userService=(0,r.f3M)(h.K),this.destroyRef=(0,r.f3M)(r.ktI),this.router=(0,r.f3M)(g.F0),this.loginForm=this.initLoginForm()}login(){this.loginForm.markAllAsTouched(),!0!==this.loginForm.invalid&&(this.isLoading$.next(!0),this.userService.login(this.loginForm.value).pipe((0,x.P)(),E(this.loginForm),(0,Z.K)(e=>{if(e instanceof _.g){const{validationErrors:t}=e;u.D.COMMON_ERROR_FIELD in t&&this.commonErrors$.next(t[u.D.COMMON_ERROR_FIELD])}return(0,T._)(()=>e)}),(0,C.x)(()=>{this.isLoading$.next(!1)}),(0,A.sL)(this.destroyRef)).subscribe(()=>{this.router.navigate(["/"])}))}trackByErrors(e,t){return t.message}initLoginForm(){return this.formBuilder.group({email:this.formBuilder.control("",[i.kI.required,i.kI.email]),password:this.formBuilder.control("",[i.kI.required,i.kI.minLength(c.MIN_LENGHT)])})}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=r.Xpm({type:o,selectors:[["camp-login"]],decls:26,vars:13,consts:[[1,"auth-container"],[1,"auth-title"],["class","auth-common-errors-container",4,"ngIf"],[1,"auth-form",3,"formGroup","ngSubmit"],["color","accent"],["formControlName","email","matInput",""],[4,"ngIf"],[4,"ngFor","ngForOf"],["type","password","formControlName","password","matInput",""],["type","submit","mat-raised-button","","color","primary",1,"auth-submit"],["routerLink","/auth/register","href","",1,"auth-link"],["class","auth-spinner",4,"ngIf"],[1,"auth-common-errors-container"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"auth-spinner"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"h1",1),r._uU(2,"Login"),r.qZA(),r.YNc(3,j,2,2,"div",2),r.ALo(4,"async"),r.TgZ(5,"form",3),r.NdJ("ngSubmit",function(){return t.login()}),r.TgZ(6,"mat-form-field",4)(7,"mat-label",4),r._uU(8,"Email"),r.qZA(),r._UZ(9,"input",5),r.YNc(10,P,3,4,"mat-error",6),r.YNc(11,w,3,4,"mat-error",6),r.YNc(12,Y,2,1,"mat-error",7),r.qZA(),r.TgZ(13,"mat-form-field",4)(14,"mat-label",4),r._uU(15,"Password"),r.qZA(),r._UZ(16,"input",8),r.YNc(17,Q,3,4,"mat-error",6),r.YNc(18,$,3,4,"mat-error",6),r.YNc(19,B,2,1,"mat-error",7),r.qZA(),r.TgZ(20,"button",9),r._uU(21,"Login"),r.qZA()(),r.TgZ(22,"a",10),r._uU(23,"Do not have an account yet?"),r.qZA(),r.YNc(24,b,2,0,"div",11),r.ALo(25,"async"),r.qZA()),2&e&&(r.xp6(3),r.Q6J("ngIf",r.lcZ(4,9,t.commonErrors$)),r.xp6(2),r.Q6J("formGroup",t.loginForm),r.xp6(5),r.Q6J("ngIf",t.loginForm.controls.email.hasError("required")&&t.loginForm.controls.email.touched),r.xp6(1),r.Q6J("ngIf",t.loginForm.controls.email.hasError("email")&&t.loginForm.controls.email.touched),r.xp6(1),r.Q6J("ngForOf",t.loginForm.controls.email.getError("invalid")),r.xp6(5),r.Q6J("ngIf",t.loginForm.controls.password.hasError("required")&&t.loginForm.controls.password.touched),r.xp6(1),r.Q6J("ngIf",t.loginForm.controls.password.hasError("minlength")&&t.loginForm.controls.password.touched),r.xp6(1),r.Q6J("ngForOf",t.loginForm.controls.password.getError("invalid")),r.xp6(5),r.Q6J("ngIf",r.lcZ(25,11,t.isLoading$)))},dependencies:[i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,g.rH,m.sg,m.O5,M.O,l.KE,l.hX,l.TO,f.Nt,d.lW,m.Ov,L],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;height:100vh;flex-direction:column;justify-content:center;align-items:center}.auth-form[_ngcontent-%COMP%]{width:450px;display:flex;flex-direction:column}.auth-title[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin-bottom:var(--space-lg)}.auth-spinner[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;z-index:100;background-color:var(--spinner-background-color)}.auth-submit[_ngcontent-%COMP%]{margin-bottom:var(--space-sm)}.auth-link[_ngcontent-%COMP%]{text-decoration:none;color:var(--primary-contrast-color)}.auth-common-errors-container[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}"]}),o})();function k(o,n){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const e=n.$implicit;r.xp6(1),r.hij(" ",e.message," ")}}function G(o,n){if(1&o&&(r.TgZ(0,"div",15),r.YNc(1,k,2,1,"mat-error",16),r.qZA()),2&o){const e=n.ngIf,t=r.oxw();r.xp6(1),r.Q6J("ngForOf",e)("ngForTrackBy",t.trackByErrors)}}function z(o,n){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Email","required")," "))}function X(o,n){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Email","email")," "))}function D(o,n){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const e=n.$implicit;r.xp6(1),r.hij(" ",e," ")}}function K(o,n){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"First name","required")," "))}function H(o,n){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const e=n.$implicit;r.xp6(1),r.hij(" ",e," ")}}function W(o,n){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Last name","required")," "))}function V(o,n){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const e=n.$implicit;r.xp6(1),r.hij(" ",e," ")}}function rr(o,n){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Password","minlength")," "))}function or(o,n){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Password","required")," "))}function tr(o,n){if(1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.qZA()),2&o){const e=n.$implicit;r.xp6(1),r.hij(" ",e," ")}}function er(o,n){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Repeated password","minlength")," "))}function nr(o,n){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Repeated password","required")," "))}function ir(o,n){1&o&&(r.TgZ(0,"mat-error"),r._uU(1),r.ALo(2,"errorMessage"),r.qZA()),2&o&&(r.xp6(1),r.hij(" ",r.xi3(2,1,"Passwords","matchError")," "))}function ar(o,n){1&o&&(r.TgZ(0,"div",17),r._UZ(1,"camp-spinner"),r.qZA())}const sr=[{path:"login",component:S,canActivate:[F]},{path:"register",component:(()=>{class o{constructor(){this.isLoading$=new p.X(!1),this.commonErrors$=new p.X([]),this.formBuilder=(0,r.f3M)(i.j3),this.userService=(0,r.f3M)(h.K),this.destroyRef=(0,r.f3M)(r.ktI),this.router=(0,r.f3M)(g.F0),this.registerForm=this.initRegisterForm()}register(){this.registerForm.markAllAsTouched(),!0!==this.registerForm.invalid&&(this.isLoading$.next(!0),this.userService.register(this.registerForm.value).pipe((0,x.P)(),E(this.registerForm),(0,Z.K)(e=>{if(e instanceof _.g){const{validationErrors:t}=e;u.D.COMMON_ERROR_FIELD in t&&this.commonErrors$.next(t[u.D.COMMON_ERROR_FIELD])}return(0,T._)(()=>e)}),(0,C.x)(()=>{this.isLoading$.next(!1)}),(0,A.sL)(this.destroyRef)).subscribe(()=>{this.router.navigate(["/"])}))}trackByErrors(e,t){return t.message}initRegisterForm(){return this.formBuilder.group({email:this.formBuilder.control("",[i.kI.required,i.kI.email]),firstName:this.formBuilder.control("",[i.kI.required]),lastName:this.formBuilder.control("",[i.kI.required]),password:this.formBuilder.control("",[i.kI.required,i.kI.minLength(c.MIN_LENGHT)]),repeatPassword:this.formBuilder.control("",[i.kI.required,i.kI.minLength(c.MIN_LENGHT),c.matchControl("password")])})}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=r.Xpm({type:o,selectors:[["camp-login"]],decls:45,vars:20,consts:[[1,"auth-container"],[1,"auth-title"],["class","auth-common-errors-container",4,"ngIf"],[1,"auth-form",3,"formGroup","ngSubmit"],["color","accent"],["formControlName","email","matInput",""],[4,"ngIf"],[4,"ngFor","ngForOf"],["formControlName","firstName","matInput",""],["formControlName","lastName","matInput",""],["type","password","formControlName","password","matInput",""],["type","password","formControlName","repeatPassword","matInput",""],["type","submit","mat-raised-button","","color","primary",1,"auth-submit"],["routerLink","/auth/login","href","",1,"auth-link"],["class","auth-spinner",4,"ngIf"],[1,"auth-common-errors-container"],[4,"ngFor","ngForOf","ngForTrackBy"],[1,"auth-spinner"]],template:function(e,t){1&e&&(r.TgZ(0,"div",0)(1,"h1",1),r._uU(2,"Register"),r.qZA(),r.YNc(3,G,2,2,"div",2),r.ALo(4,"async"),r.TgZ(5,"form",3),r.NdJ("ngSubmit",function(){return t.register()}),r.TgZ(6,"mat-form-field",4)(7,"mat-label",4),r._uU(8,"Email"),r.qZA(),r._UZ(9,"input",5),r.YNc(10,z,3,4,"mat-error",6),r.YNc(11,X,3,4,"mat-error",6),r.YNc(12,D,2,1,"mat-error",7),r.qZA(),r.TgZ(13,"mat-form-field",4)(14,"mat-label",4),r._uU(15,"First name"),r.qZA(),r._UZ(16,"input",8),r.YNc(17,K,3,4,"mat-error",6),r.YNc(18,H,2,1,"mat-error",7),r.qZA(),r.TgZ(19,"mat-form-field",4)(20,"mat-label",4),r._uU(21,"Last name"),r.qZA(),r._UZ(22,"input",9),r.YNc(23,W,3,4,"mat-error",6),r.YNc(24,V,2,1,"mat-error",7),r.qZA(),r.TgZ(25,"mat-form-field",4)(26,"mat-label",4),r._uU(27,"Password"),r.qZA(),r._UZ(28,"input",10),r.YNc(29,rr,3,4,"mat-error",6),r.YNc(30,or,3,4,"mat-error",6),r.YNc(31,tr,2,1,"mat-error",7),r.qZA(),r.TgZ(32,"mat-form-field",4)(33,"mat-label",4),r._uU(34,"Repeat password"),r.qZA(),r._UZ(35,"input",11),r.YNc(36,er,3,4,"mat-error",6),r.YNc(37,nr,3,4,"mat-error",6),r.YNc(38,ir,3,4,"mat-error",6),r.qZA(),r.TgZ(39,"button",12),r._uU(40,"Register"),r.qZA()(),r.TgZ(41,"a",13),r._uU(42,"Already have an account?"),r.qZA(),r.YNc(43,ar,2,0,"div",14),r.ALo(44,"async"),r.qZA()),2&e&&(r.xp6(3),r.Q6J("ngIf",r.lcZ(4,16,t.commonErrors$)),r.xp6(2),r.Q6J("formGroup",t.registerForm),r.xp6(5),r.Q6J("ngIf",t.registerForm.controls.email.hasError("required")&&t.registerForm.controls.email.touched),r.xp6(1),r.Q6J("ngIf",t.registerForm.controls.email.hasError("email")&&t.registerForm.controls.email.touched),r.xp6(1),r.Q6J("ngForOf",t.registerForm.controls.email.getError("invalid")),r.xp6(5),r.Q6J("ngIf",t.registerForm.controls.firstName.hasError("required")&&t.registerForm.controls.firstName.touched),r.xp6(1),r.Q6J("ngForOf",t.registerForm.controls.firstName.getError("invalid")),r.xp6(5),r.Q6J("ngIf",t.registerForm.controls.lastName.hasError("required")&&t.registerForm.controls.lastName.touched),r.xp6(1),r.Q6J("ngForOf",t.registerForm.controls.lastName.getError("invalid")),r.xp6(5),r.Q6J("ngIf",t.registerForm.controls.password.hasError("minlength")&&t.registerForm.controls.password.touched),r.xp6(1),r.Q6J("ngIf",t.registerForm.controls.password.hasError("required")&&t.registerForm.controls.password.touched),r.xp6(1),r.Q6J("ngForOf",t.registerForm.controls.password.getError("invalid")),r.xp6(5),r.Q6J("ngIf",t.registerForm.controls.repeatPassword.hasError("minlength")&&t.registerForm.controls.repeatPassword.touched),r.xp6(1),r.Q6J("ngIf",t.registerForm.controls.repeatPassword.hasError("required")&&t.registerForm.controls.repeatPassword.touched),r.xp6(1),r.Q6J("ngIf",t.registerForm.controls.repeatPassword.hasError("matchError")&&t.registerForm.controls.repeatPassword.touched),r.xp6(5),r.Q6J("ngIf",r.lcZ(44,18,t.isLoading$)))},dependencies:[i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,g.rH,m.sg,m.O5,M.O,l.KE,l.hX,l.TO,f.Nt,d.lW,m.Ov,L],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;height:100vh;flex-direction:column;justify-content:center;align-items:center}.auth-form[_ngcontent-%COMP%]{width:450px;display:flex;flex-direction:column}.auth-title[_ngcontent-%COMP%]{text-align:center;font-size:40px;margin-bottom:var(--space-lg)}.auth-spinner[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;z-index:100;background-color:var(--spinner-background-color)}.auth-submit[_ngcontent-%COMP%]{margin-bottom:var(--space-sm)}.auth-link[_ngcontent-%COMP%]{text-decoration:none;color:var(--primary-contrast-color)}.auth-common-errors-container[_ngcontent-%COMP%]{margin-bottom:var(--space-md)}"]}),o})(),canActivate:[F]}];let mr=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[g.Bz.forChild(sr),g.Bz]}),o})(),lr=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=r.oAB({type:o}),o.\u0275inj=r.cJS({imports:[i.UX,m.ez,I.m,R.p0,y.Cq,O.JX,q.TU,l.lN,f.c,d.ot,mr]}),o})()}}]);