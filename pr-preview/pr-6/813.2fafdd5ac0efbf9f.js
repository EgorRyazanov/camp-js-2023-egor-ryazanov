"use strict";(self.webpackChunkangular=self.webpackChunkangular||[]).push([[813],{9813:(we,z,c)=>{c.r(z),c.d(z,{AnimeModule:()=>Le});var P=c(89),Y=c(2355),A=c(7513),W=c(3058),Z=c(7250),Q=c(7455),N=c(6652),F=c(8090),L=c(2074),b=c(2369),V=c(2151),M=c(1300),O=c(6789),e=c(4355),ee=c(7881),te=c(8987);function ne(t,i){if(1&t){const n=e.EpF();e.TgZ(0,"button",4),e.NdJ("click",function(){e.CHM(n);const s=e.oxw();return e.KtG(s.handleLogout())}),e.TgZ(1,"mat-icon",5),e._uU(2,"logout"),e.qZA()()}}function ie(t,i){1&t&&(e.TgZ(0,"a",6)(1,"mat-icon",7),e._uU(2,"login"),e.qZA()())}let ae=(()=>{class t{constructor(){this.userService=(0,e.f3M)(te.K),this.destroyRef=(0,e.f3M)(e.ktI),this.isAuthorized$=this.userService.isAuthorized$}handleLogout(){this.userService.logout().pipe((0,ee.sL)(this.destroyRef)).subscribe()}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["camp-base-page"]],decls:9,vars:4,consts:[[1,"header"],[1,"header__title"],["mat-icon-button","","type","button","class","header__button",3,"click",4,"ngIf","ngIfElse"],["login",""],["mat-icon-button","","type","button",1,"header__button",3,"click"],["color","accent","aria-label","Logout"],["mat-icon-button","","routerLink","/auth/login",1,"header__link"],["color","accent","aria-label","Login"]],template:function(n,a){if(1&n&&(e.TgZ(0,"header",0)(1,"h2",1),e._uU(2,"AnimeHub"),e.qZA(),e.YNc(3,ne,3,0,"button",2),e.ALo(4,"async"),e.YNc(5,ie,3,0,"ng-template",null,3,e.W1O),e.qZA(),e.TgZ(7,"main"),e._UZ(8,"router-outlet"),e.qZA()),2&n){const s=e.MAs(6);e.xp6(3),e.Q6J("ngIf",e.lcZ(4,2,a.isAuthorized$))("ngIfElse",s)}},dependencies:[P.O5,O.lC,O.rH,V.Hw,M.o6,M.RK,P.Ov],styles:[".header[_ngcontent-%COMP%]{background-color:var(--primary-alternative-contrast-color);padding:var(--space-md);display:flex;justify-content:space-between;align-items:center}.header__title[_ngcontent-%COMP%]{margin:0}"]}),t})();var U,re=c(4121),oe=c(2147),w=c(7969),B=c(8168),se=c(3151),ce=c(1528),r=(()=>((r=r||{}).Tv="TV",r.Ova="OVA",r.Movie="MOVIE",r.Special="SPECIAL",r.Ona="ONA",r.Music="MUSIC",r.Unknown="UNKNOWN",r))();!function(t){const i={[r.Movie]:"Movie",[r.Music]:"Music",[r.Ona]:"Ona",[r.Ova]:"Ova",[r.Special]:"Special",[r.Tv]:"Tv",[r.Unknown]:"Unknown"};t.toReadable=function n(a){return i[a]}}(U||(U={}));var S,p=(()=>((p=p||{}).TitleEnghlish="titleEnglish",p.Status="status",p.AiredStart="aired.start",p.None="",p))(),h=(()=>((h=h||{}).Ascending="asc",h.Descending="desc",h.None="",h))();!function(t){function i(o,f){return Object.values(f).includes(o)}function n(o){return i(o,r)}function y(o){const f=Number(o);return Number.isNaN(f)?{pageNumber:t.defaultQueryParams.pageNumber,isValid:!1}:{pageNumber:f,isValid:!0}}function u(o){const f=Number(o);return Number.isNaN(f)||!t.pageSizes.includes(f)?{pageSize:t.defaultQueryParams.pageSize,isValid:!1}:{pageSize:f,isValid:!0}}function J(o){return o instanceof Array?{search:t.defaultQueryParams.search,isValid:!1}:{search:o,isValid:!0}}function k(o){if(o instanceof Array){const f=o.filter(C=>"string"==typeof C&&n(C));return{isValid:f.length===o.length,type:f}}return n(o)?{type:[o],isValid:!0}:{type:t.defaultQueryParams.type,isValid:!1}}function j(o){return o instanceof Array||!function s(o){return i(o,p)}(o)?{field:p.None,isValid:!1}:{field:o,isValid:!0}}function $(o){return o instanceof Array||!function a(o){return i(o,h)}(o)?{direction:h.None,isValid:!1}:{direction:o,isValid:!0}}t.defaultQueryParams={pageSize:5,pageNumber:0,type:[],field:p.None,direction:h.None,search:""},t.pageSizes=[5,10,25],t.pageToModel=y,t.sizeToModel=u,t.searchToModel=J,t.typeToModel=k,t.fieldToModel=j,t.directionToModel=$,t.toModel=function Ve(o){const f=y(o.pageNumber),C=u(o.pageSize),H=j(o.field),X=k(o.type),K=J(o.search),q=$(o.direction);return{isValid:f.isValid&&C.isValid&&H.isValid&&X.isValid&&K.isValid&&q.isValid,pageNumber:f.pageNumber,pageSize:C.pageSize,field:H.field,type:X.type,search:K.search,direction:q.direction}}}(S||(S={}));var ue=c(4707),G=c(6738),l=(()=>((l=l||{}).Tv="TV",l.Ova="OVA",l.Movie="MOVIE",l.Special="SPECIAL",l.Ona="ONA",l.Music="MUSIC",l.Unknown="UNKNOWN",l))(),_=(()=>((_=_||{}).Finished="FINISHED",_.Airing="AIRING",_.NotYetAired="NOT_YET_AIRED",_))(),m=(()=>((m=m||{}).G="G",m.PG="PG",m.PG_13="PG_13",m.R_17="R_17",m.R_PLUS="R_PLUS",m.R_X="R_X",m.Unknown="UNKNOWN",m))();class me{constructor(i){this.id=i.id,this.created=i.created,this.modified=i.modified,this.titleEnglish=i.titleEnglish,this.titleJapanese=i.titleJapanese,this.image=i.image,this.aired=i.aired,this.type=i.type,this.status=i.status,this.score=i.score,this.userScore=i.userScore}}var x,d=(()=>((d=d||{}).G="G",d.PG="PG",d.PG_13="PG_13",d.R_17="R_17",d.R_PLUS="R_PLUS",d.R_X="R_X",d.Unknown="UNKNOWN",d))(),g=(()=>((g=g||{}).Finished="FINISHED",g.Airing="AIRING",g.NotYetAired="NOT_YET_AIRED",g))();!function(t){const i={[t.Finished]:"Finished",[t.Airing]:"Airing",[t.NotYetAired]:"Not yet aired"};t.toReadable=function n(a){return i[a]}}(g||(g={})),function(t){const i={[l.Music]:r.Music,[l.Ova]:r.Ova,[l.Ona]:r.Ona,[l.Special]:r.Special,[l.Tv]:r.Tv,[l.Unknown]:r.Unknown,[l.Movie]:r.Movie},n={[_.Finished]:g.Finished,[_.NotYetAired]:g.NotYetAired,[_.Airing]:g.Airing};t.fromDto=function a(s){return new me({id:s.id,created:new Date(s.created),modified:new Date(s.modified),titleEnglish:s.title_eng,titleJapanese:s.title_jpn,image:s.image,aired:s.aired,type:i[s.type],status:n[s.status],score:s.score,userScore:s.user_score})}}(x||(x={}));var E,D,t,I,R,T=(()=>((T=T||{}).TitleEnghlish="title_eng",T.Status="status",T.AiredStart="aired__startswith",T.None="",T))(),v=(()=>((v=v||{}).Ascending="-",v.Descending="",v.None="",v))();!function(t){const i={[h.Ascending]:v.Ascending,[h.Descending]:v.Descending,[h.None]:v.None};t.toDto=function n(a,s){if(null!=a&&a?.field in s)return`${i[a.direction]}${s[a.field]}`}}(E||(E={})),(t=D||(D={})).ANIME_TYPE_TO_DTO={[r.Music]:l.Music,[r.Ova]:l.Ova,[r.Ona]:l.Ona,[r.Special]:l.Special,[r.Tv]:l.Tv,[r.Unknown]:l.Unknown,[r.Movie]:l.Movie},t.toDto=function i(n){return n.map(a=>t.ANIME_TYPE_TO_DTO[a]).join(", ")},function(t){const n={[p.TitleEnghlish]:T.TitleEnghlish,[p.Status]:T.Status,[p.AiredStart]:T.AiredStart},a={[g.Finished]:_.Finished,[g.NotYetAired]:_.NotYetAired,[g.Airing]:_.Airing},s={[d.G]:m.G,[d.PG]:m.PG,[d.PG_13]:m.PG_13,[d.R_17]:m.R_17,[d.R_PLUS]:m.R_PLUS,[d.R_X]:m.R_X,[d.Unknown]:m.Unknown};t.toDto=function y(u){return function de(t){const i={...t};for(const n in i)void 0===i[n]&&delete i[n];return i}({limit:u?.pageSize??25,offset:u?.pageNumber?u.pageNumber*(u?.pageSize??25):void 0,ordering:E.toDto(u?.ordering,n),rating:u?.rating?s[u.rating]:void 0,search:u?.search,source:u?.source,status:u?.status?a[u.status]:void 0,title_eng:u?.titleEnglish,title_jpn:u?.titleJapanese,type:u?.type?D.ANIME_TYPE_TO_DTO[u.type]:void 0,type__in:u?.typeIn?D.toDto(u.typeIn):void 0})}}(I||(I={})),function(t){t.fromDto=function i(n,a){return{count:n.count,next:n.next,previous:n.previous,items:n.results.map(s=>a(s))}}}(R||(R={}));var ge=c(5134);let pe=(()=>{class t{constructor(){this.http=(0,e.f3M)(G.eN),this.urlService=(0,e.f3M)(ge.i)}getAnimes(n){return this.http.get(this.urlService.animeUrls.animes,{params:new G.LE({fromObject:{...I.toDto(n)}})}).pipe((0,w.U)(a=>R.fromDto(a,x.fromDto)))}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var fe=c(2519),he=c(9024);let _e=(()=>{class t{transform(n){return g.toReadable(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"readableAnimeStatus",type:t,pure:!0}),t})(),Ae=(()=>{class t{transform(n){return U.toReadable(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"readableAnimeType",type:t,pure:!0}),t})(),Te=(()=>{class t{transform(n){return""===n||null==n||n instanceof Array&&0===n.length?"Unknown":n}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275pipe=e.Yjl({name:"empty",type:t,pure:!0}),t})();function ye(t,i){if(1&t&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&t){const n=i.$implicit;e.Q6J("value",n),e.xp6(1),e.Oqu(n)}}function Se(t,i){1&t&&(e.TgZ(0,"th",26),e._uU(1,"Image"),e.qZA())}function ve(t,i){if(1&t&&(e.TgZ(0,"td",27),e._UZ(1,"img",28),e.qZA()),2&t){const n=i.$implicit;e.xp6(1),e.Q6J("alt",n.titleEnglish)("src",n.image,e.LSH)}}function Ne(t,i){1&t&&(e.TgZ(0,"th",26),e._uU(1,"Japanese Title"),e.qZA())}function Pe(t,i){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"empty"),e.qZA()),2&t){const n=i.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,n.titleJapanese)," ")}}function Oe(t,i){1&t&&(e.TgZ(0,"th",29),e._uU(1,"English Title"),e.qZA())}function Ce(t,i){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"empty"),e.qZA()),2&t){const n=i.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,n.titleEnglish)," ")}}function Me(t,i){1&t&&(e.TgZ(0,"th",30),e._uU(1,"Start"),e.qZA())}function De(t,i){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"empty"),e.ALo(3,"date"),e.qZA()),2&t){const n=i.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,e.lcZ(3,3,n.aired.start))," ")}}function Ze(t,i){1&t&&(e.TgZ(0,"th",31),e._uU(1,"Status"),e.qZA())}function be(t,i){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"readableAnimeStatus"),e.qZA()),2&t){const n=i.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,n.status))}}function Ue(t,i){1&t&&(e.TgZ(0,"th",26),e._uU(1,"Type"),e.qZA())}function xe(t,i){if(1&t&&(e.TgZ(0,"td",27),e._uU(1),e.ALo(2,"readableAnimeType"),e.qZA()),2&t){const n=i.$implicit;e.xp6(1),e.Oqu(e.lcZ(2,1,n.type))}}function Ee(t,i){1&t&&e._UZ(0,"tr",32)}function Ie(t,i){1&t&&e._UZ(0,"tr",33)}function Re(t,i){if(1&t){const n=e.EpF();e.ynx(0),e.TgZ(1,"table",11),e.NdJ("matSortChange",function(s){e.CHM(n);const y=e.oxw();return e.KtG(y.changeSortParameter(s))}),e.ynx(2,12),e.YNc(3,Se,2,0,"th",13),e.YNc(4,ve,2,2,"td",14),e.BQk(),e.ynx(5,15),e.YNc(6,Ne,2,0,"th",13),e.YNc(7,Pe,3,3,"td",14),e.BQk(),e.ynx(8,16),e.YNc(9,Oe,2,0,"th",17),e.YNc(10,Ce,3,3,"td",14),e.BQk(),e.ynx(11,18),e.YNc(12,Me,2,0,"th",19),e.YNc(13,De,4,5,"td",14),e.BQk(),e.ynx(14,20),e.YNc(15,Ze,2,0,"th",21),e.YNc(16,be,3,3,"td",14),e.BQk(),e.ynx(17,22),e.YNc(18,Ue,2,0,"th",13),e.YNc(19,xe,3,3,"td",14),e.BQk(),e.YNc(20,Ee,1,0,"tr",23),e.YNc(21,Ie,1,0,"tr",24),e.qZA(),e.TgZ(22,"mat-paginator",25),e.NdJ("page",function(s){e.CHM(n);const y=e.oxw();return e.KtG(y.setPageParameter(s))}),e.qZA(),e.BQk()}if(2&t){const n=i.ngIf,a=e.oxw();e.xp6(1),e.Q6J("trackBy",a.trackByAnime)("dataSource",n.items)("matSortActive",a.queryParams.field)("matSortDirection",a.queryParams.direction),e.xp6(19),e.Q6J("matHeaderRowDef",a.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",a.displayedColumns),e.xp6(1),e.Q6J("length",n.count)("pageSize",a.queryParams.pageSize)("pageIndex",a.queryParams.pageNumber)("pageSizeOptions",a.pageSizes)}}function ze(t,i){1&t&&(e.TgZ(0,"div",34),e._UZ(1,"camp-spinner"),e.qZA())}function Ye(t,i){1&t&&(e.ynx(0),e._uU(1,"Unknown"),e.BQk())}const Qe=[{path:"",title:"Animes",component:ae,children:[{path:"",component:(()=>{class t{constructor(){this.router=(0,e.f3M)(O.F0),this.animeService=(0,e.f3M)(pe),this.formBuilder=(0,e.f3M)(N.j3),this.activeRoute=(0,e.f3M)(O.gz),this.pageSizes=S.pageSizes,this.isLoading$=new re.X(!1),this.form=this.formBuilder.group({search:[S.defaultQueryParams.search],filters:[S.defaultQueryParams.type]}),this.displayedColumns=["image","titleJapanese","titleEnglish","start aired","type","status"],this.filters=[r.Tv,r.Ova,r.Movie,r.Special,r.Ona,r.Music,r.Unknown],this.animePage$=this.createAnimesStream()}trackByAnime(n,a){return a.id}changeSortParameter(n){const a=S.fieldToModel(n.active),s=S.directionToModel(n.direction);this.setQueryParams({direction:s.direction,field:s.direction===h.None?p.None:a.field})}setPageParameter(n){const a=this.queryParams;this.setQueryParams({pageNumber:n.pageIndex??a.pageNumber,pageSize:n.pageSize??a.pageSize})}setPaginationParameters(){this.setQueryParams({search:this.form.value.search,type:this.form.value.filters,pageNumber:S.defaultQueryParams.pageNumber})}get queryParams(){const n=this.activeRoute.snapshot.queryParams;return{search:n.search,type:n.type,pageNumber:n.pageNumber,pageSize:n.pageSize,field:n.field,direction:n.direction}}setQueryParams(n){const a=this.router.url.split("?")[0];this.router.navigate([a],{queryParams:{...this.queryParams,...n}})}createAnimesStream(){return this.activeRoute.queryParams.pipe((0,oe.x)(),(0,w.U)(n=>this.mapQueryParamsToModel(n)),(0,B.b)(({isValid:n,params:a})=>{n||this.setQueryParams(a),this.setFormValues(a),this.isLoading$.next(!0)}),(0,se.b)(500),(0,ce.w)(({params:n})=>this.getAnimePage(n)),(0,ue.f)(this.isLoading$),(0,B.b)(()=>{window.scroll({top:0,behavior:"smooth"})}))}mapQueryParamsToModel(n){const a=S.toModel({search:n.search,type:n.type,pageNumber:n.pageNumber,pageSize:n.pageSize,field:n.field,direction:n.direction}),{isValid:s,...y}=a;return{params:y,isValid:a.isValid}}getAnimePage(n){return this.animeService.getAnimes({pageSize:n.pageSize,pageNumber:n.pageNumber,ordering:{field:n.field,direction:n.direction},search:n.search,typeIn:n.type})}setFormValues(n){this.form.patchValue({search:n.search,filters:n.type})}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["camp-anime-page"]],decls:19,vars:8,consts:[[1,"animes"],[1,"animes__form","form",3,"formGroup","ngSubmit"],["color","accent"],["formControlName","search","matInput",""],["formControlName","filters","multiple",""],[3,"value",4,"ngFor","ngForOf"],["type","submit","mat-button","","color","accent"],[4,"ngIf"],["class","animes__spinner",4,"ngIf"],["emptyCell",""],[3,"value"],["matSort","","mat-table","","aria-label","Table of animes",1,"animes__table","table",3,"trackBy","dataSource","matSortActive","matSortDirection","matSortChange"],["matColumnDef","image"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","titleJapanese"],["matColumnDef","titleEnglish"],["mat-sort-header","titleEnglish","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","start aired"],["mat-sort-header","aired.start","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","status"],["mat-sort-header","status","mat-header-cell","",4,"matHeaderCellDef"],["matColumnDef","type"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["showFirstLastButtons","","aria-label","Select page of Anime search results",1,"animes__paginator",3,"length","pageSize","pageIndex","pageSizeOptions","page"],["mat-header-cell",""],["mat-cell",""],[1,"table__image",3,"alt","src"],["mat-sort-header","titleEnglish","mat-header-cell",""],["mat-sort-header","aired.start","mat-header-cell",""],["mat-sort-header","status","mat-header-cell",""],["mat-header-row",""],["mat-row",""],[1,"animes__spinner"]],template:function(n,a){1&n&&(e.TgZ(0,"div",0)(1,"form",1),e.NdJ("ngSubmit",function(){return a.setPaginationParameters()}),e.TgZ(2,"mat-form-field",2)(3,"mat-label",2),e._uU(4,"Search"),e.qZA(),e._UZ(5,"input",3),e.qZA(),e.TgZ(6,"mat-form-field",2)(7,"mat-label"),e._uU(8,"Filters"),e.qZA(),e.TgZ(9,"mat-select",4),e.YNc(10,ye,2,2,"mat-option",5),e.qZA()(),e.TgZ(11,"button",6),e._uU(12,"Find"),e.qZA()(),e.YNc(13,Re,23,11,"ng-container",7),e.ALo(14,"async"),e.YNc(15,ze,2,0,"div",8),e.ALo(16,"async"),e.qZA(),e.YNc(17,Ye,2,0,"ng-template",null,9,e.W1O)),2&n&&(e.xp6(1),e.Q6J("formGroup",a.form),e.xp6(9),e.Q6J("ngForOf",a.filters),e.xp6(3),e.Q6J("ngIf",e.lcZ(14,4,a.animePage$)),e.xp6(2),e.Q6J("ngIf",e.lcZ(16,6,a.isLoading$)))},dependencies:[P.sg,P.O5,fe.O,A.BZ,A.fO,A.as,A.w1,A.Dz,A.nj,A.ge,A.ev,A.XQ,A.Gk,Z.YE,Z.nU,Q.NW,N._Y,N.Fj,N.JJ,N.JL,N.sg,N.u,b.KE,b.hX,L.Nt,F.gD,he.ey,M.lW,P.Ov,P.uU,_e,Ae,Te],styles:[".table__image[_ngcontent-%COMP%]{margin:10px;width:150px;height:150px;object-fit:contain}.animes[_ngcontent-%COMP%]{background-color:var(--background-primary-color);height:100vh}.animes__form[_ngcontent-%COMP%]{padding:var(--space-md);margin:0 auto}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;width:50%}.animes__paginator[_ngcontent-%COMP%]{position:sticky;bottom:0}.animes__spinner[_ngcontent-%COMP%]{position:fixed;top:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;z-index:100;background-color:var(--spinner-background-color)}"]}),t})()}]}];let Fe=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[O.Bz.forChild(Qe),O.Bz]}),t})(),Le=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[Fe,P.ez,Y.m,A.p0,W.Cq,Z.JX,Q.TU,N.UX,b.lN,L.c,F.LD,V.Ps,M.ot,Y.m]}),t})()}}]);